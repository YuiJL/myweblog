<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% block meta %}<!-- block meta -->{% endblock %}
    <title>{% block title %}{% endblock %} - Jiayi Li's Webapp</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:500" />
    <link rel="stylesheet" href="/static/css/yui.css" />
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Logo</a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">
                        <span class="glyphicon glyphicon-home"></span> Home</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://github.com/YuiJL/myweblog">
                            <span class="glyphicon glyphicon-fire"></span> Source</a>
                    </li>
                    <li><a href="#">About</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                {% if g.__user__ %}
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#"> {{ g.__user__.name }}
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            {% if g.__user__.admin %}
                            <li><a href="/manage/blogs/newblog"><span class="glyphicon glyphicon-plus"></span> New Blog</a></li>
                            {% endif %}
                            <li><a href="/signout"><span class="glyphicon glyphicon-log-out"></span> Sign Out</a></li>
                        </ul>
                    </li>
                {% else %}
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-user"></span> Log In <span class="caret"></span>
                        </a>
                        <ul id="login-dp" class="dropdown-menu">
                            <li>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <form id="loginform" v-on:submit.prevent="login" class="form">
                                            <div class="alert alert-danger" hidden>
                                                <a class="close" onclick="$('.alert').fadeOut('fast')">&times;</a>
                                                <span class="glyphicon glyphicon-info-sign"></span>
                                                <span v-text="message"></span>
                                            </div>
                                            <div class="form-group">
                                                <input class="form-control" v-model="email" type="email" placeholder="Email address" required>
                                            </div>
                                            <div class="form-group">
                                                <input class="form-control" v-model="password" type="password" placeholder="Password" required>
                                            </div>
                                            <div class="form-group">
                                                <button class="btn btn-primary btn-block">Log In</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="bottom text-center">
                                        <a href="/register"><b>Sign Up Now!</b></a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li><a href="/register"><span class="glyphicon glyphicon-log-in"></span> Sign Up</a></li>
                {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row content">
            {% block content %}
            {% endblock %}
            <div class="col-sm-3 sidenav text-center">
                {% block sidecontent %}
                {% endblock %}
            </div>
        </div>
    </div>
    <footer class="container-fluid text-center">
        <p>&copy; 2016 Jiayi Li [<a href="/manage/" target="_blank">Manage</a>]</p>
        <p><a href="http://www.yuijiayi.com">www.yuijiayi.com</a>. All rights reserved.</p>
        <p>Proudly powered by <a target="_blank" href="http://getbootstrap.com">Bootstrap</a> and <a target="_blank" href="http://flask.pocoo.org">Flask</a></p>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/static/js/vue.min.js"></script>
    <script src="/static/js/sha1.min.js"></script>
    <script src="/static/js/login.js"></script>
    {% block script %} <!-- add script here --> {% endblock %}
</body>
</html>
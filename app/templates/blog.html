{% extends '__base__.html' %}

{% block title %}{{ blog.title }}{% endblock %}

{% block content %}
<div class="container-fluid" style="margin:10px 0 20px 0">
    <div class="row content">
        <div class="col-sm-9" id="main">
            <h2 class="text-primary">{{ blog.title }}</h2>
            <h4><small><span class="glyphicon glyphicon-time"></span> Posted by {{ blog.user_name }}, {{ blog.created|datetime }}</small></h4>
            <p>{{ blog.content }}</p>
            <hr>
            {% if g.__user__ %}
            <h4>Leave a Comment:</h4>
            <form class="form" v-on:submit.prevent="submit">
                <div class="form-group">
                    <textarea class="form-control" rows="6" v-model="comment" placeholder="Content" required></textarea>
                </div>
                <div class="form-group">
                    <button class="btn btn-success">Submit</button>
                </div>
            </form>
            <br><br>
            {% else %}
            <h4>Please sign in</h4>
            {% endif %}
    
            <p><span class="badge" v-text="comments | count"></span> Comments:</p><br>
            <div class="row" v-for="item in comments" track-by="_id">
                <div class="col-sm-2 text-center">
                    <img :src="item.user_image" class="img-circle" height="65" width="65" alt="Avatar" />
                </div>
                <div class="col-sm-10">
                    <h4 style="display:inline-block" v-text="item.user_name"></h4>
                    <h4 style="display:inline-block"></h4>
                    <h4 style="display:inline-block"><small v-text="item.created | datetime"></small></h4>
                    <p style="overflow-x:scroll" v-html="item.content"></p>
                    <br>
                </div>
            </div>
        </div>
        <div class="col-sm-3 sidenav text-center">
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
    <script src="/static/js/comment.js"></script>
{% endblock %}
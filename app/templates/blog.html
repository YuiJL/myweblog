{% extends '__base__.html' %}

{% block title %}{{ blog.title }}{% endblock %}

{% block content %}
<div class="col-sm-9" id="main">
    <h2 class="text-primary">{{ blog.title }}</h2>
    <h4><small><span class="glyphicon glyphicon-time"></span> Posted by {{ blog.user_name }}, {{ blog.created|datetime }}</small></h4>
        <!-- will add tags here -->
    <p>{{ blog.content }}</p>
    <hr>
    {% if g.__user__ %}
    <h4>Leave a Comment:</h4>
    <form class="form" v-on:submit.prevent="submit">
        <div class="form-group">
            <textarea class="form-control" rows="8" v-model="comment" placeholder="Content" required></textarea>
        </div>
        <div class="form-group">
            <button class="btn btn-success">Submit</button>
        </div>
    </form>
    <br><br>
    {% else %}
    <h4>Please login</h4>
    {% endif %}
    
    <p><span class="badge">2</span> Comments:</p><br>
    <div class="row" v-for="item in comments" track-by="_id">
        <div class="col-sm-2 text-center">
            <img :src="item.user_image" class="img-circle" height="65" width="65" alt="Avatar" />
        </div>
        <div class="col-sm-10">
            <h4 v-text="item.user_name"></h4>
            <p v-text="item.content"></p>
            <br>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
    <script src="/static/js/comment.js"></script>
{% endblock %}